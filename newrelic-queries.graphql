query FetchCollectorConfiguration($agentName: String!, $accountId: Int!) {
  # @genqlient(typename: "Actor")
  actor {
    # @genqlient(typename: "NetworkMonitoring")
    networkMonitoring {
      # @genqlient(typename: "AgentConfiguration")
      agentConfigurations(
        filters: { accountId: $accountId, agentConfigurationName: $agentName }
      ) {
        accountId
        rawConfiguration
        revisionId
        name
        id
        updatedAt
        createdAt
      }
    }
  }
}

mutation PublishNewConfig(
  $agentId: ID!
  $rawConfiguration: NetworkMonitoringRawConfiguration!
) {
  networkMonitoringPublishDeviceConfigurations(
    agentConfigurationId: $agentId
    rawConfiguration: $rawConfiguration
  ) {
    errors {
      description
    }
  }
}
